<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CLOUDZ | HUB</title>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; user-select: none; cursor: none !important; outline: none; }
        body { background-color: #000; color: #fff; font-family: 'Courier New', Courier, monospace; overflow: hidden; height: 100vh; width: 100vw; display: flex; justify-content: center; align-items: center; }
        
        #cursor-wrapper { position: fixed; pointer-events: none; z-index: 999999; mix-blend-mode: difference; transform: translate(-50%, -50%); }
        .reticle-part { position: absolute; border: 1.5px solid #fff; width: 15px; height: 15px; }
        #reticle-top-left { top: -12px; left: -12px; border-right: none; border-bottom: none; }
        #reticle-top-right { top: -12px; right: -12px; border-left: none; border-bottom: none; }
        #reticle-bottom-left { bottom: -12px; left: -12px; border-right: none; border-top: none; }
        #reticle-bottom-right { bottom: -12px; right: -12px; border-left: none; border-top: none; }
        #cursor-dot { width: 4px; height: 4px; background: #fff; border-radius: 50%; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); }

        h1.title { font-size: clamp(3rem, 10vw, 6rem); letter-spacing: 12px; text-transform: uppercase; font-weight: 900; margin-bottom: 25px; text-align: center; color: #fff; text-shadow: 0 0 15px #fff; animation: white-glow 2s infinite alternate; }
        @keyframes white-glow { from { opacity: 0.8; } to { opacity: 1; text-shadow: 0 0 30px #fff; } }
        
        .modal-box { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 500px; max-width: 95vw; background: rgba(0,0,0,0.98); border: 1px solid #fff; padding: 30px; z-index: 5000; text-align: center; }
        
        .btn-style, .tiny-btn { 
            width: 100%; max-width: 300px; padding: 12px; border: 1px solid #fff; background: rgba(0,0,0,0.5); 
            color: #fff; letter-spacing: 2px; margin: 10px auto; display: block; transition: 0.3s; 
            font-family: inherit; font-weight: bold; text-align: center; 
        }
        .btn-style:hover, .tiny-btn:hover { 
            background: #fff; color: #000; 
            box-shadow: 0 0 20px #fff, 0 0 40px rgba(255,255,255,0.5);
            transform: scale(1.02);
        }

        #btn-discord { border-color: #5865F2; color: #5865F2; }
        #btn-cashapp { border-color: #00D632; color: #00D632; }
        input { background: #000; border: 1px solid #fff; color: #fff; padding: 12px; width: 100%; max-width: 300px; text-align: center; margin-bottom: 10px; font-family: inherit; }

        #chat-window { display: none; position: fixed; bottom: 80px; left: 20px; width: 300px; height: 350px; background: rgba(0,0,0,0.95); border: 1px solid #fff; z-index: 1000; flex-direction: column; }
        #chat-history { flex: 1; overflow-y: auto; padding: 10px; font-size: 0.75rem; text-align: left; border-bottom: 1px solid #333; }
        #chat-input { width: 100%; border: none; padding: 10px; text-align: left; background: #000; color: #fff; }

        #game-canvas { background: #000; border: 1px solid #333; display: none; margin: 10px auto; }
        .ttt-grid { display: none; grid-template-columns: repeat(3, 1fr); gap: 5px; width: 240px; margin: 20px auto; }
        .cell { aspect-ratio: 1/1; border: 1px solid #fff; display: flex; align-items: center; justify-content: center; font-size: 2rem; }
        
        .corner-controls { position: fixed; top: 20px; left: 20px; z-index: 1000; display: none; flex-direction: column; gap: 10px; }
        .tiny-btn { width: 90px; padding: 8px; font-size: 0.7rem; }
        #particles-js { position: absolute; inset: 0; z-index: 1; pointer-events: none; }
    </style>
</head>
<body>

    <div id="particles-js"></div>
    <div id="cursor-wrapper"><div class="reticle-part" id="reticle-top-left"></div><div class="reticle-part" id="reticle-top-right"></div><div class="reticle-part" id="reticle-bottom-left"></div><div class="reticle-part" id="reticle-bottom-right"></div><div id="cursor-dot"></div></div>

    <div id="intro-overlay" style="position:fixed; inset:0; background:#000; z-index:10000; display:flex; justify-content:center; align-items:center;">
        <div class="btn-style" style="width: auto; padding: 20px 40px;" onclick="this.parentElement.style.display='none'; document.getElementById('auth-modal').style.display='block';">ENTER SYSTEM</div>
    </div>

    <div id="auth-modal" class="modal-box">
        <h2>LOGIN/REGISTER</h2><br>
        <input type="text" id="username" placeholder="USERNAME" maxlength="12">
        <input type="password" id="password" placeholder="PASSWORD">
        <button class="btn-style" onclick="login()">CONNECT</button>
    </div>

    <div class="corner-controls" id="controls">
        <button class="tiny-btn" onclick="document.getElementById('info-modal').style.display='block'">INFO</button>
        <button class="tiny-btn" onclick="toggleChat()">CHAT</button>
    </div>

    <div id="info-modal" class="modal-box">
        <button style="float:right; background:none; border:none; color:white;" onclick="this.parentElement.style.display='none'">[X]</button>
        <div style="text-align:left; font-size:0.85rem; line-height:1.6; margin-top:20px;">
            <p>Hi, I'm Cloudz. I do a lot of coding, especially with Python. I'm currently trying to learn every major language I need to know to make whatever I want.</p><br>
            <p>See that Cash App button? If you want to support me, you can donate there or use it for business. If you want to talk business for an app or a website, DM me on discord.</p>
        </div>
    </div>

    <div id="chat-window">
        <div id="chat-history"></div>
        <input type="text" id="chat-input" placeholder="Message...">
    </div>

    <div id="main-content" style="display:none; flex-direction:column; align-items:center; z-index:10;">
        <h1 class="title">Cloudz</h1>
        <button id="btn-discord" class="btn-style" onclick="copyDiscord()">DISCORD: cloudz.cloud</button>
        <a href="https://cash.app/$roman479" target="_blank" id="btn-cashapp" class="btn-style">CASH APP</a>
        <button class="btn-style" onclick="document.getElementById('games-hub').style.display='block'">GAMES</button>
    </div>

    <div id="games-hub" class="modal-box">
        <h2>GAMES</h2>
        <button class="btn-style" onclick="launchGame('snake')">SNAKE</button>
        <button class="btn-style" onclick="launchGame('dino')">DINO RUN</button>
        <button class="btn-style" onclick="launchGame('zombies')">ZOMBIES</button>
        <button class="btn-style" onclick="launchGame('tag')">GLOBAL TAG (MP)</button>
        <button class="btn-style" onclick="launchGame('ttt')">TIC-TAC-TOE</button>
        <button class="btn-style" onclick="this.parentElement.style.display='none'">BACK</button>
    </div>

    <div id="play-area" class="modal-box">
        <div style="display:flex; justify-content:space-between; margin-bottom:10px;">
            <span id="g-name">GAME</span><span id="g-score">0</span>
        </div>
        <canvas id="game-canvas" width="400" height="400"></canvas>
        <button id="retry-btn" class="btn-style" style="display:none;" onclick="retryGame()">RETRY</button>
        <button class="btn-style" onclick="quitGame()">EXIT</button>
    </div>

    <script>
        const firebaseConfig = { databaseURL: "https://cloudzinfo-1f0ec-default-rtdb.firebaseio.com" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        let myName = "", currentType = "", gameLoop, score = 0, keys = {}, active = false;
        let pX=200, pY=200, pDY=0, bullets=[], zoms=[], snake=[], sDir='R', food={}, obs=[], tagPlayers={};
        let lastTagTime = 0;
        const canvas = document.getElementById('game-canvas'), ctx = canvas.getContext('2d');
        const cur = document.getElementById('cursor-wrapper');
        let mX = 0, mY = 0, rot = 0;

        window.addEventListener('mousemove', e => {
            mX = e.clientX; mY = e.clientY;
            cur.style.left = mX + 'px'; cur.style.top = mY + 'px';
        });

        setInterval(() => { rot += 1.5; cur.style.transform = `translate(-50%,-50%) rotate(${rot}deg)`; }, 16);

        function login() {
            myName = document.getElementById('username').value.trim();
            if(!myName) return;
            document.getElementById('auth-modal').style.display='none';
            document.getElementById('main-content').style.display='flex';
            document.getElementById('controls').style.display='flex';
            
            db.ref('online').once('value', s => {
                let itStatus = !s.exists(); 
                db.ref('online/'+myName).set({
                    x:200, y:200, it: itStatus, 
                    baseColor: (Math.random() > 0.5 ? 'white' : 'blue')
                });
            });
            db.ref('online/'+myName).onDisconnect().remove();

            db.ref('chat').limitToLast(20).on('child_added', s => {
                const h = document.getElementById('chat-history');
                const v = s.val();
                h.innerHTML += `<div><span style="color:hsl(${v.u.length*30},70%,70%)">${v.u}:</span> ${v.t}</div>`;
                h.scrollTop = h.scrollHeight;
            });
        }

        function toggleChat() { let c=document.getElementById('chat-window'); c.style.display=(c.style.display==='flex'?'none':'flex'); }
        document.getElementById('chat-input').onkeydown = e => { if(e.key==='Enter' && e.target.value.trim()){ db.ref('chat').push({u:myName, t:e.target.value}); e.target.value=""; }};

        window.onkeydown = e => { 
            keys[e.code] = true;
            if(currentType === 'snake') {
                if((e.code==='KeyW'||e.code==='ArrowUp') && sDir!=='D') sDir='U';
                if((e.code==='KeyS'||e.code==='ArrowDown') && sDir!=='U') sDir='D';
                if((e.code==='KeyA'||e.code==='ArrowLeft') && sDir!=='R') sDir='L';
                if((e.code==='KeyD'||e.code==='ArrowRight') && sDir!=='L') sDir='R';
            }
        };
        window.onkeyup = e => keys[e.code] = false;

        function launchGame(t) {
            currentType = t; active = true; score = 0;
            document.getElementById('games-hub').style.display='none';
            document.getElementById('play-area').style.display='block';
            canvas.style.display = 'block';
            document.getElementById('retry-btn').style.display='none';
            document.getElementById('g-name').textContent = t.toUpperCase();
            if(gameLoop) clearInterval(gameLoop);
            
            if(t==='snake') { snake=[{x:10,y:10},{x:9,y:10}]; sDir='R'; food={x:15,y:10}; gameLoop=setInterval(doSnake, 100); }
            if(t==='dino') { pY=350; pDY=0; obs=[]; gameLoop=setInterval(doDino, 20); }
            if(t==='zombies') { pX=200; pY=200; zoms=[]; bullets=[]; gameLoop=setInterval(doZoms, 20); }
            if(t==='tag') { 
                document.getElementById('g-score').parentElement.style.visibility = 'hidden';
                db.ref('online').on('value', s => tagPlayers = s.val() || {}); 
                gameLoop=setInterval(doTag, 20); 
            } else {
                document.getElementById('g-score').parentElement.style.visibility = 'visible';
            }
        }

        function doTag() {
            ctx.fillStyle="#000"; ctx.fillRect(0,0,400,400);
            if(keys['KeyW']||keys['ArrowUp']) pY-=4; if(keys['KeyS']||keys['ArrowDown']) pY+=4;
            if(keys['KeyA']||keys['ArrowLeft']) pX-=4; if(keys['KeyD']||keys['ArrowRight']) pX+=4;
            pX = Math.max(8, Math.min(392, pX)); pY = Math.max(8, Math.min(392, pY));
            db.ref('online/'+myName).update({x:pX, y:pY});
            
            const now = Date.now();
            Object.keys(tagPlayers).forEach(id => {
                let p = tagPlayers[id];
                // Color Logic: Red if IT, otherwise use their assigned baseColor
                ctx.fillStyle = p.it ? "red" : p.baseColor;
                ctx.fillRect(p.x-8, p.y-8, 16, 16);
                
                // Tag Logic
                if(id !== myName && tagPlayers[myName].it && now - lastTagTime > 500) {
                    if(Math.hypot(pX-p.x, pY-p.y) < 16) {
                        lastTagTime = now;
                        db.ref('online/'+id).update({it:true});
                        db.ref('online/'+myName).update({it:false});
                    }
                }
            });
        }

        function end() { active=false; clearInterval(gameLoop); document.getElementById('retry-btn').style.display='block'; }
        function retryGame() { launchGame(currentType); }
        function quitGame() { clearInterval(gameLoop); active=false; document.getElementById('play-area').style.display='none'; document.getElementById('main-content').style.display='flex'; }
        function copyDiscord() { navigator.clipboard.writeText("cloudz.cloud"); }

        particlesJS("particles-js", { "particles": { "number": { "value": 100 }, "color": { "value": "#ffffff" }, "size": { "value": 1.5 }, "line_linked": { "enable": true, "distance": 120, "opacity": 0.2 }, "move": { "enable": true, "speed": 0.5 } } });
    </script>
</body>
</html>
