<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <title>CLOUDZZZ!!!</title>
    <meta property="og:title" content="CLOUDZZZ!!!">
    <meta property="og:description" content="this is my website... do you like it? it has games, chat, and info! come play ðŸ¥º">
    <meta property="og:image" content="https://i.ibb.co/v4m0YvL/image-631268.png">
    <meta name="theme-color" content="#00A2FF">

    <link rel="icon" type="image/x-icon" href="./favicon.ico">
    <link rel="manifest" href="./site.webmanifest">

    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; user-select: none; cursor: none !important; outline: none; }
        body { background-color: #000; color: #fff; font-family: 'Courier New', Courier, monospace; overflow: hidden; height: 100vh; width: 100vw; display: flex; justify-content: center; align-items: center; text-align: center; }
        
        #particles-js { position: absolute; inset: 0; z-index: 1; pointer-events: none; }

        /* CURSOR */
        #cursor-wrapper { position: fixed; pointer-events: none; z-index: 999999; mix-blend-mode: difference; transform: translate(-50%, -50%); }
        .reticle-part { position: absolute; border: 1.5px solid #fff; width: 15px; height: 15px; }
        #reticle-top-left { top: -12px; left: -12px; border-right: none; border-bottom: none; }
        #reticle-top-right { top: -12px; right: -12px; border-left: none; border-bottom: none; }
        #reticle-bottom-left { bottom: -12px; left: -12px; border-right: none; border-top: none; }
        #reticle-bottom-right { bottom: -12px; right: -12px; border-left: none; border-top: none; }
        #cursor-dot { width: 4px; height: 4px; background: #fff; border-radius: 50%; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); }

        /* CENTERED UI */
        .modal-box { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 500px; max-width: 90vw; background: rgba(0,0,0,0.95); border: 1px solid #fff; padding: 30px; z-index: 5000; flex-direction: column; align-items: center; }
        
        .btn-style { 
            width: 100%; max-width: 280px; padding: 12px; border: 1px solid #fff; background: none; 
            color: #fff; letter-spacing: 2px; margin: 10px auto; transition: 0.3s; font-weight: bold;
        }
        .btn-style:hover { background: #fff; color: #000; box-shadow: 0 0 15px #fff; }

        input { background: #000; border: 1px solid #fff; color: #fff; padding: 12px; width: 100%; max-width: 280px; text-align: center; margin-bottom: 10px; }

        #chat-window { display: none; position: fixed; bottom: 20px; right: 20px; width: 280px; height: 300px; background: rgba(0,0,0,0.9); border: 1px solid #fff; z-index: 1000; flex-direction: column; }
        #chat-history { flex: 1; overflow-y: auto; padding: 10px; font-size: 0.8rem; text-align: left; }
        #chat-input { width: 100%; border: none; border-top: 1px solid #fff; padding: 10px; background: #000; color: #fff; text-align: left; }

        #game-canvas { background: #000; border: 1px solid #fff; display: none; margin: 15px auto; }
        #live-counter { position: fixed; top: 20px; right: 20px; color: #0f0; font-weight: bold; z-index: 2000; }
    </style>
</head>
<body>

    <div id="particles-js"></div>
    <div id="live-counter" style="display:none;">LIVE: 0</div>
    <div id="cursor-wrapper"><div class="reticle-part" id="reticle-top-left"></div><div class="reticle-part" id="reticle-top-right"></div><div class="reticle-part" id="reticle-bottom-left"></div><div class="reticle-part" id="reticle-bottom-right"></div><div id="cursor-dot"></div></div>

    <audio id="bg-music" loop><source src="https://cdn.pixabay.com/audio/2022/03/10/audio_c8c8a7315b.mp3" type="audio/mpeg"></audio>

    <div id="intro-overlay" style="position:fixed; inset:0; background:#000; z-index:10000; display:flex; justify-content:center; align-items:center;">
        <button class="btn-style" onclick="startSystem()">INITIALIZE SYSTEM</button>
    </div>

    <div id="auth-modal" class="modal-box">
        <h2>LOGIN</h2><br>
        <input type="text" id="username" placeholder="USERNAME" maxlength="12">
        <input type="password" id="password" placeholder="PASSWORD">
        <button class="btn-style" onclick="login()">CONNECT</button>
    </div>

    <div id="main-content" style="display:none; flex-direction:column; align-items:center; z-index:10;">
        <h1 style="font-size: 4rem; text-shadow: 0 0 20px #fff;">Cloudz</h1><br>
        <button class="btn-style" onclick="document.getElementById('games-hub').style.display='flex'">GAMES</button>
        <button class="btn-style" onclick="toggleChat()">CHAT</button>
        <a href="https://cash.app/$roman479" target="_blank" class="btn-style" style="color:#0f0; border-color:#0f0;">CASH APP</a>
    </div>

    <div id="games-hub" class="modal-box">
        <h2>MINIGAMES</h2>
        <button class="btn-style" onclick="launchGame('snake')">SNAKE</button>
        <button class="btn-style" onclick="launchGame('zombies')">ZOMBIES (SHOOT)</button>
        <button class="btn-style" onclick="launchGame('tag')">GLOBAL TAG</button>
        <button class="btn-style" onclick="launchGame('ttt')">TTT (MULTIPLAYER)</button>
        <button class="btn-style" onclick="this.parentElement.style.display='none'">BACK</button>
    </div>

    <div id="play-area" class="modal-box">
        <div style="width:100%; display:flex; justify-content:space-between; margin-bottom:5px;">
            <span id="g-name">GAME</span><span id="g-score">0</span>
        </div>
        <canvas id="game-canvas" width="400" height="400" onmousedown="handleShoot(event)"></canvas>
        <button id="retry-btn" class="btn-style" style="display:none;" onclick="retryGame()">RETRY</button>
        <button class="btn-style" onclick="quitGame()">QUIT</button>
    </div>

    <div id="chat-window">
        <div id="chat-history"></div>
        <input type="text" id="chat-input" placeholder="Enter message...">
    </div>

    <script>
        const firebaseConfig = { databaseURL: "https://cloudzinfo-1f0ec-default-rtdb.firebaseio.com" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        let myName = "", currentType = "", gameLoop, score = 0, keys = {}, active = false;
        let pX=200, pY=200, bullets=[], zoms=[], snake=[], sDir='R', food={}, tagPlayers={};
        const canvas = document.getElementById('game-canvas'), ctx = canvas.getContext('2d');
        const cur = document.getElementById('cursor-wrapper');

        window.addEventListener('mousemove', e => { cur.style.left = e.clientX + 'px'; cur.style.top = e.clientY + 'px'; });
        window.addEventListener('keydown', e => keys[e.code] = true);
        window.addEventListener('keyup', e => keys[e.code] = false);

        function startSystem() {
            document.getElementById('intro-overlay').style.display='none';
            document.getElementById('auth-modal').style.display='flex';
            document.getElementById('bg-music').play();
            particlesJS("particles-js", { "particles": { "number": { "value": 100 }, "line_linked": { "enable": true, "opacity": 0.2 }, "move": { "speed": 1 } } });
        }

        function login() {
            myName = document.getElementById('username').value.trim() || "Guest";
            document.getElementById('auth-modal').style.display='none';
            document.getElementById('main-content').style.display='flex';
            
            db.ref('online/' + myName).set(true);
            db.ref('online/' + myName).onDisconnect().remove();
            db.ref('online').on('value', s => {
                document.getElementById('live-counter').style.display = 'block';
                document.getElementById('live-counter').innerText = `LIVE: ${s.numChildren()}`;
            });

            db.ref('chat').limitToLast(15).on('child_added', s => {
                document.getElementById('chat-history').innerHTML += `<div><b>${s.val().u}:</b> ${s.val().t}</div>`;
                document.getElementById('chat-history').scrollTop = 9999;
            });
        }

        function toggleChat() { let c = document.getElementById('chat-window'); c.style.display = (c.style.display === 'flex' ? 'none' : 'flex'); }
        document.getElementById('chat-input').onkeydown = e => { if(e.key === 'Enter' && e.target.value.trim()){ db.ref('chat').push({u: myName, t: e.target.value}); e.target.value = ""; } };

        function handleShoot(e) {
            if(currentType === 'zombies' && active) {
                let rect = canvas.getBoundingClientRect();
                let angle = Math.atan2((e.clientY - rect.top) - pY, (e.clientX - rect.left) - pX);
                bullets.push({x: pX, y: pY, dx: Math.cos(angle)*7, dy: Math.sin(angle)*7});
            }
        }

        function launchGame(t) {
            currentType = t; active = true; score = 0;
            document.getElementById('games-hub').style.display='none';
            document.getElementById('play-area').style.display='flex';
            canvas.style.display = 'block';
            if(gameLoop) clearInterval(gameLoop);
            if(t==='snake') { snake=[{x:10,y:10}]; sDir='R'; food={x:15,y:10}; gameLoop=setInterval(doSnake, 100); }
            if(t==='zombies') { pX=200; pY=200; zoms=[]; bullets=[]; gameLoop=setInterval(doZoms, 20); }
            if(t==='tag' || t==='ttt') { db.ref('pos').on('value', s => tagPlayers = s.val() || {}); gameLoop=setInterval(doMulti, 20); }
        }

        function doSnake() {
            if(keys['KeyW'] && sDir!=='D') sDir='U'; if(keys['KeyS'] && sDir!=='U') sDir='D';
            if(keys['KeyA'] && sDir!=='R') sDir='L'; if(keys['KeyD'] && sDir!=='L') sDir='R';
            let head = {...snake[0]};
            if(sDir==='U') head.y--; if(sDir==='D') head.y++; if(sDir==='L') head.x--; if(sDir==='R') head.x++;
            if(head.x<0||head.x>=20||head.y<0||head.y>=20) return end();
            snake.unshift(head);
            if(head.x===food.x && head.y===food.y) { score++; food={x:Math.floor(Math.random()*20),y:Math.floor(Math.random()*20)}; document.getElementById('g-score').innerText = score; } else snake.pop();
            ctx.fillStyle="#000"; ctx.fillRect(0,0,400,400); ctx.fillStyle="#0f0"; snake.forEach(s=>ctx.fillRect(s.x*20,s.y*20,18,18)); ctx.fillStyle="#f00"; ctx.fillRect(food.x*20,food.y*20,18,18);
        }

        function doZoms() {
            if(keys['KeyW']) pY-=3; if(keys['KeyS']) pY+=3; if(keys['KeyA']) pX-=3; if(keys['KeyD']) pX+=3;
            if(Math.random()<0.02) zoms.push({x:Math.random()*400, y:Math.random()*400, h:100});
            ctx.fillStyle="#000"; ctx.fillRect(0,0,400,400);
            ctx.fillStyle="#00f"; ctx.fillRect(pX-10,pY-10,20,20);
            bullets.forEach((b,i)=>{ b.x+=b.dx; b.y+=b.dy; ctx.fillStyle="#fff"; ctx.fillRect(b.x,b.y,4,4); });
            zoms.forEach((z,zi)=>{
                let d=Math.hypot(pX-z.x, pY-z.y); z.x+=(pX-z.x)/d; z.y+=(pY-z.y)/d;
                ctx.fillStyle="#f00"; ctx.fillRect(z.x-10,z.y-10,20,20);
                if(d<15) end();
                bullets.forEach((b,bi)=>{ if(Math.hypot(b.x-z.x,b.y-z.y)<15){ zoms.splice(zi,1); bullets.splice(bi,1); score++; document.getElementById('g-score').innerText=score; }});
            });
        }

        function doMulti() {
            if(keys['KeyW']) pY-=4; if(keys['KeyS']) pY+=4; if(keys['KeyA']) pX-=4; if(keys['KeyD']) pX+=4;
            db.ref('pos/'+myName).set({x:pX, y:pY, role: currentType==='ttt'?'Innocent':'Player'});
            ctx.fillStyle="#000"; ctx.fillRect(0,0,400,400);
            Object.values(tagPlayers).forEach(p => { ctx.fillStyle="white"; ctx.fillRect(p.x-10,p.y-10,20,20); });
        }

        function end() { active=false; clearInterval(gameLoop); document.getElementById('retry-btn').style.display='block'; }
        function retryGame() { launchGame(currentType); }
        function quitGame() { clearInterval(gameLoop); active=false; document.getElementById('play-area').style.display='none'; document.getElementById('main-content').style.display='flex'; }
    </script>
</body>
</html>
